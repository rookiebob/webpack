let babel = require('babel-core');
let types = require('babel-types');
// 自己写一个babel预设
const visitor = {
  ImportDeclaration:{
    enter(path,ref={opts:{}}){
      const specifiers = path.node.specifiers
      const source = path.node.source
      if(ref.opts.library == source.value && !types.isImportDefaultSpecifier(specifiers[0])){
        const declarations = specifiers.map((specifier,index)=>{
          return types.ImportDeclaration(
            [types.importDefaultSpecifier(specifier.local)],
            types.stringLiteral(`${source.value}/${specifier.local.name}`)
          )
        })
        path.replaceWithMultiple(declarations)
      }
    }
  }
}
module.exports = function(babel){
  return {
    visitor
  }
}